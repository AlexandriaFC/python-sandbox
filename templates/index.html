<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Address Autocomplete</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

  <!-- 1) Declare a global async init function -->
  <script>
    window.initAutocomplete = async () => {
      // Now google.maps is defined, import the places library
      const { PlaceAutocompleteElement } = await google.maps.importLibrary("places");

      const input = document.getElementById("address");
      const autocomplete = new PlaceAutocompleteElement({
        element: input,
        fields: ["formatted_address"],
        componentRestrictions: { country: "US" },
        filter: ["address"]
      });

      autocomplete.addListener("place_changed", () => {
        const place = autocomplete.getPlace();
        console.log("Selected address:", place.formatted_address);
      });
    };
  </script>

  <!-- 2) Load the Maps JS API with your key and callback -->
  <script
    src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY&v=weekly&callback=initAutocomplete"
    async
    defer
  ></script>
</head>
<body>
  <h1>HomeSure</h1>
  <h3>To get started, share an address and we'll generate a Home Risk Report fo you.</h3>

  {% if success %}
    <p class="success">Successfully submitted!</p>
  {% endif %}

  <form action="/" method="post">
    <input
      type="text"
      id="address"
      name="address"
      placeholder="Start typing your addressâ€¦"
      required
    />
    <button type="submit">Save</button>
  </form>
</body>
</html>
